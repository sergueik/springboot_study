<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ultra Basic DOT Renderer</title>
<style>
  #output {
    border: 1px solid #ccc;
    padding: 5px;
    overflow: auto;
    max-height: 80vh;
  }
</style>

  <!-- Optional Bootstrap -->
  <link rel="stylesheet"
        href="bootstrap.min.css">

  <!-- Viz.js -->
  <script src="viz.js"></script>
  <script src="full.render.js"></script>
<script>
let scale = 1;

function zoomIn() {
  scale += 0.1;
  applyZoom();
}

function zoomOut() {
  scale -= 0.1;
  applyZoom();
}

function applyZoom() {
  const svg = document.querySelector("#output svg");
  if (svg) {
    svg.style.transform = `scale(${scale})`;
    svg.style.transformOrigin = "0 0";
  }
}
</script>

</head>

<body class="container mt-3">

<div class="row">
  <div class="col-6">
    <textarea id="dotInput" class="form-control" rows="12">
digraph G {
  A -> B;
  B -> C;
  C -> A;
}
    </textarea>

    <button class="btn btn-primary mt-2" onclick="renderDot()">Render</button>
    <button onclick="zoomIn()">+</button>
<button onclick="zoomOut()">-</button>
  </div>

  <div class="col-6">
    <div id="output" style="border:1px solid #ccc; padding:10px;"></div>
  </div>
</div>
<script>
  const viz = new Viz();

  function renderDot() {
    const dot = document.getElementById("dotInput").value;

    viz.renderSVGElement(dot)
      .then(function(svg) {

        // Make SVG responsive
        svg.removeAttribute("width");
        svg.removeAttribute("height");
        svg.style.width = "150%";
        svg.style.height = "auto";

        // Optional: set viewBox if missing
        if (!svg.getAttribute("viewBox")) {
          const width = svg.viewBox.baseVal.width || 1600;
          const height = svg.viewBox.baseVal.height || 1200;
          svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
        }

        const output = document.getElementById("output");
        output.innerHTML = "";
        output.appendChild(svg);
      })
      .catch(function(error) {
        document.getElementById("output").innerText = error.message;
      });
  }
</script>
</body>
</html>


